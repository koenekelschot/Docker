sonarr:
  container_name: sonarr
  image: linuxserver/sonarr:latest
  depends_on:
    - nordvpn
  restart: unless-stopped
  environment:
    - PUID=${PUID}
    - PGID=${PGID}
    - TZ=${TZ}
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ${VOLUMES}/sonarr:/config # config files
    - ${MEDIA}/Series:/series # tv shows folder
    - ${DOWNLOADS}:/downloads # download folder
  network_mode: service:nordvpn
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8989/"]
    interval: 30s
    timeout: 10s
  labels:
    - "traefik.enable=true"
    - "traefik.http.routers.sonarr.entrypoints=internal"
    - "traefik.http.routers.sonarr.rule=Host(`series.${SERVER_NAME}`)"
    - "traefik.http.services.sonarr.loadbalancer.server.port=8989"
