geoip:
  image: maxmindinc/geoipupdate:latest
  container_name: geoip
  environment:
    - GEOIPUPDATE_ACCOUNT_ID=${GEOIP_ACCOUNT}
    - GEOIPUPDATE_LICENSE_KEY=${GEOIP_LICENSE}
    - GEOIPUPDATE_EDITION_IDS=GeoLite2-City
    - GEOIPUPDATE_FREQUENCY=500
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - ${VOLUMES}/geoip:/usr/share/GeoIP
  restart: unless-stopped
  healthcheck:
    test: ls /usr/share/GeoIP/GeoLite2-City.mmdb >/dev/null && exit 0 || exit 1
    interval: 10s
    timeout: 5s
geoip-auth:
  image: thelastproject/simplegeoipforwardauth:latest
  container_name: geoip-auth
  network_mode: host
  volumes:
    - ${VOLUMES}/geoip:/db:ro
  restart: unless-stopped
  ports:
    - 8000:8000
